<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boa.cashfilm.mapper.memberMapper">
	<!-- 회원가입 상세 처리 -->
	<insert id="insertSignUpDetails" parameterType="com.boa.cashfilm.member.dto.MemberDetails">
		INSERT INTO cfmemberdetails (
			memberEmail
			, memberPhoneFirst
			, memberPhoneSecond
			, memberPostalCode
			, memberAddress
			, memberCertification
			, memberPhone
			, memberSignDay
		) VALUES (
			#{memberEmail}
			, #{memberPhoneFirst}
			, #{memberPhoneSecond}
			, #{memberPostalCode}
			, #{memberAddress}
			, #{memberCertification}
			, #{memberPhone}
			, NOW()
		)
	</insert>

	<!-- 회원가입 간단 처리 -->
	<insert id="insertSignUpSimple" parameterType="com.boa.cashfilm.member.dto.MemberSimple">
		INSERT INTO cfmemberemail (
			memberEmail
			, memberClassificationCode
			, memberName
			, memberPassword
			, memberCondition
		) VALUES (
			#{memberEmail}
			, 3
			, #{memberName}
			, #{memberPassword}
			, '활동'
		)
	</insert>
	
	<!-- 로그인 처리 -->
	<select id="selectSignIn" parameterType="com.boa.cashfilm.member.dto.EmailAndPassword" resultType="com.boa.cashfilm.member.dto.MemberSimple">
		SELECT
			memberEmail
			, memberClassificationCode
			, comCode
			, memberName
			, memberPassword
			, memberCondition
		FROM cfmemberemail
		WHERE memberEmail = #{memberEmail} AND memberPassword = #{memberPassword}
	</select>
</mapper>